<ion-header>
  <ion-toolbar color="secondary" style="--background:#111;">
        <ion-buttons slot="start">
      <ion-back-button defaultHref="/dashboard-admin"></ion-back-button>
    </ion-buttons>
    <div class="app-logo" slot="start" style="margin-left:6px">
      <svg viewBox="0 0 24 24" xmlns="http://www.w3.org/2000/svg" aria-hidden="true">
        <path d="M12 2s4 1 5 4c0 0-3 .5-4 3 0 0 4 0 6 3 0 0-3 1-4 4 0 0 1-2-1-4-1s-2 1-4 1c0 0-1-3-4-4 0 0 3-2 6-3 0 0-1.5-3.5-4-4 0 0 3-1 5-1z" fill="currentColor" />
      </svg>
    </div>
    <ion-title style="color:#43e36a;">Especies registradas</ion-title>
    <ion-buttons slot="end">

      <ion-button color="success" (click)="irAgregarEspecie()" title="Registrar especie" style="--background:#43e36a; --color:#111;">
        <ion-icon name="add-circle-outline" slot="icon-only"></ion-icon>
      </ion-button>
      <ion-button (click)="logout()" color="danger" style="--color:#fff;">
        <ion-icon name="log-out" slot="icon-only"></ion-icon>
      </ion-button>
    </ion-buttons>
  </ion-toolbar>
</ion-header>

<ion-content class="ion-padding" style="background:#111; color:#fff;">
  <ion-grid>
    <ion-row class="ion-text-center" style="font-weight:bold;">
      <ion-col>Nombre común</ion-col>
      <ion-col>Imagen</ion-col>
      <ion-col>Ubicación</ion-col>
      <ion-col>Usuario</ion-col>
      <ion-col>Aprobada</ion-col>
      <ion-col>Acciones</ion-col>
    </ion-row>
    <ion-row *ngFor="let especie of especies" class="ion-text-center">
      <ion-col>{{ especie.nombreComun }}</ion-col>
      <ion-col>
        <img *ngIf="especie?.foto" [src]="especie?.foto" alt="Foto especie" style="width:48px; height:48px; object-fit:cover; border-radius:8px;" />
        <span *ngIf="!especie?.foto" style="color:#888;">Sin foto</span>
      </ion-col>
      <ion-col>
        <div *ngIf="especie?.ubicacion?.coordenadas?.lat != null && especie?.ubicacion?.coordenadas?.lng != null">
          <span style="font-size:0.95em;">{{ especie?.ubicacion?.coordenadas?.lat | number:'1.5-5' }}, {{ especie?.ubicacion?.coordenadas?.lng | number:'1.5-5' }}</span>
        </div>
        <span *ngIf="especie?.ubicacion?.coordenadas?.lat == null || especie?.ubicacion?.coordenadas?.lng == null" style="color:#888;">Sin ubicación</span>
      </ion-col>
      <ion-col>{{ especie.reportadoPor }}</ion-col>
      <ion-col>
        <ion-badge [color]="especie.aprobada ? 'success' : 'warning'">
          {{ especie.aprobada ? 'Sí' : 'No' }}
        </ion-badge>
      </ion-col>
      <ion-col>
        <ion-button fill="clear" color="primary" (click)="abrirEditarEspecie(especie)">
          <ion-icon name="create"></ion-icon>
        </ion-button>
        <ion-button fill="clear" color="danger" (click)="abrirEliminarEspecie(especie)">
          <ion-icon name="trash"></ion-icon>
        </ion-button>
        <ion-button fill="clear" color="success" *ngIf="!especie.aprobada" (click)="abrirAprobarEspecie(especie)">
          <ion-icon name="checkmark"></ion-icon>
        </ion-button>
      </ion-col>
    </ion-row>
  </ion-grid>
  <ion-fab vertical="bottom" horizontal="end" slot="fixed">
    <ion-fab-button color="success" (click)="irAgregarEspecie()">
      <ion-icon name="add"></ion-icon>
    </ion-fab-button>
  </ion-fab>
</ion-content>
