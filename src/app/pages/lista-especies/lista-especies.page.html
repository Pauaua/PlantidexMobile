<ion-header>
  <ion-toolbar color="primary">
    <ion-buttons slot="start">
      <ion-back-button defaultHref="/home"></ion-back-button>
    </ion-buttons>
    <div class="app-logo" slot="start" style="margin-left:6px">
      <svg viewBox="0 0 24 24" xmlns="http://www.w3.org/2000/svg" aria-hidden="true">
        <path d="M12 2s4 1 5 4c0 0-3 .5-4 3 0 0 4 0 6 3 0 0-3 1-4 4 0 0 1-2-1-4-1s-2 1-4 1c0 0-1-3-4-4 0 0 3-2 6-3 0 0-1.5-3.5-4-4 0 0 3-1 5-1z" fill="currentColor" />
      </svg>
    </div>
    <ion-title>Especies Registradas</ion-title>
    <ion-buttons slot="end">
      <ion-button routerLink="/agregar-especies" color="success">
        <ion-icon name="add" slot="icon-only"></ion-icon>
      </ion-button>
      <ion-button routerLink="/mapa-comunitario" color="tertiary">
        <ion-icon name="map" slot="icon-only"></ion-icon>
      </ion-button>
    </ion-buttons>
  </ion-toolbar>
  
  <ion-toolbar>
    <ion-searchbar placeholder="Buscar especies..."></ion-searchbar>
  </ion-toolbar>
</ion-header>

<ion-content>
  <ion-list>
    <ion-item *ngFor="let especie of especies" [routerLink]="['/detalle-especies', especie.id]">
      <ion-avatar slot="start">
        <ion-icon [name]="getIconoTipo(especie.tipo)" color="success"></ion-icon>
      </ion-avatar>
      
      <ion-label>
        <h2>{{ especie.nombreComun }}</h2>
        <p><i>{{ especie.nombreCientifico }}</i></p>
        <p>
          <ion-badge [color]="getColorEstado(especie.estadoConservacion)">
            {{ especie.estadoConservacion }}
          </ion-badge>
          <ion-badge color="medium">{{ especie.tipo }}</ion-badge>
        </p>
        <p>{{ especie.ubicacion?.direccion }}</p>
        <p><small>Reportado por: {{ especie.reportadoPor }}</small></p>
      </ion-label>
      
        <ion-button *ngIf="usuarioActual?.rol === 'admin'" fill="clear" color="danger" (click)="confirmarEliminacion(especie.id, $event)">
          <ion-icon name="trash"></ion-icon>
        </ion-button>
    </ion-item>
  </ion-list>

  <!-- Estado vacío -->
  <div *ngIf="especies.length === 0" class="ion-text-center ion-padding">
    <ion-icon name="leaf-outline" size="large" color="medium"></ion-icon>
    <h3>No hay especies registradas</h3>
    <p>¡Sé el primero en reportar una especie nativa!</p>
    <ion-button routerLink="/agregar-especies" color="success">
      Registrar Primera Especie
    </ion-button>
  </div>
</ion-content>
